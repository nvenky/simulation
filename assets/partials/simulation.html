<div id="container" ng-controller='SimulationController as simulation'>
  <div class="row">
    <div class="col-md-12">
      <h1 class="page-header">Simulation</h1>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <i class="fa fa-bar-chart-o fa-fw"></i> Scenarios
        </div>
        <div class="panel-body">         
          <form name='simulationForm' class='form-horizontal' ng-submit='run()' novalidation> 
            <div id='simulation'>
              <div class="form-group">
                <label for="commission" class='col-md-2 control-label'>Commission</label>
                <div class='col-md-2'>
                  <div class="input-group">
                    <input type="text" ng-model="simulationParams.commission" value='5' class='form-control' required></input>
                    <span class="input-group-addon">%</span>
                  </div>
                </div>
                <div class='col-md-2'>
                  <div class="input-group input-append date" date-time-append>
                    <input type="datetime" date-time ng-model='simulationParams.start_date' view='date' min-view='date' format='dd-MM-yyyy' class="form-control" placeholder="Start Date"><span class="input-group-addon add-on"><i class="glyphicon glyphicon-th"></i></span>
                  </div>
                </div>
              </div>
              <div class='col-md-12'>
                <h3>Market filter</h3>
              </div>
              <div class="form-group">
                <label for="event_type" class='col-md-2 control-label'>Market</label>
                <div class='col-md-2'>
                  <select ng-model="simulationParams.marketFilter.exchangeId" ng-options="exchange.id as exchange.name for exchange in exchanges"  class='form-control' required>
                    <option value=''>Exchange<option>
                  </select>  
                </div>
                <div class='col-md-2'>
                  <select ng-model="simulationParams.marketFilter.marketType" ng-options="marketType for marketType in marketTypes"  class='form-control' required>
                    <option value=''>Market Type<option>
                  </select>  
                </div>
                <div class='col-md-2'>
                  <select ng-model="simulationParams.marketFilter.eventTypeId" ng-options="eventType.id as eventType.name for eventType in eventTypes"  class='form-control'>
                    <option value=''>Event Type<option>
                  </select>  
                </div>
              </div>
              <div ng-repeat='scenario in simulationParams.scenarios'>
                <div class='col-md-12'>
                  <h3>Scenario {{$index + 1}}</h3>
                </div>
                <div class="form-group">
                  <label for="market_type" class='col-md-2 control-label'>Position</label>
                  <div class='col-md-2'>
                    <input ng-model="simulationParams.scenarios[$index].positions" type='text' class='form-control' placeholder='Position (eg. 1,3,4)'></input>
                  </div>
                  <div class='col-md-2'>
                    <select ng-model="simulationParams.scenarios[$index].range" ng-options="range for range in ranges" class='form-control'>
                      <option value=''>Range<option>
                    </select>  
                  </div>
                  <div class='col-md-2'>
                    <input type="text" ng-model="simulationParams.scenarios[$index].minOdds" class='form-control' placeholder='Min odds'></input>
                  </div>
                  <div class='col-md-2'>
                    <div class="input-group">
                     <input type="text" ng-model="simulationParams.scenarios[$index].maxOdds" class='form-control' placeholder='Max odds'></input>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="market_type"  class='col-md-2 control-label'>Bet</label>
                  <div class='col-md-2'>
                  <select ng-model="simulationParams.scenarios[$index].betType" ng-options="betType for betType in betTypes"  class='form-control' required>
                    <option value=''>Bet Type<option>
                  </select>  
                  </div>
                  <div class='col-md-2'>
                    <div class="input-group">
                      <span class="input-group-addon">$</span>
                      <input type="text" ng-model="simulationParams.scenarios[$index].stake" class='form-control' placeholder='Stake' required></input>
                    </div>
                  </div>
                  <div class='col-md-2'>
                     <a class='btn btn-danger' ng-click="deleteScenario($index)">Delete Scenario</a>
                  </div>                  
                </div>
              </div>              
              <a class='btn btn-primary' ng-click="addScenario()">Add Scenario</a>
              <button type="submit" class='btn btn-primary'>Run</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id='summary' ng-include src="'assets/partials/summary.html'" ></div>
    <div id='chart'></div>
    <div id='race-details'></div>
    <div id="loadingOverlay" class="loadingOverlay" style="display:none">
      <img src="/assets/img/ajax_loader.gif" id="spinner" class='centered'/>
    </div>
  </div>

